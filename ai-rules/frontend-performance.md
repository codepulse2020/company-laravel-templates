# 前端效能規範

## 網路請求
- 合併請求：列表頁以分頁/排序/篩選組合一次傳遞，避免多次 round-trip。
- 快取：查詢結果可用 SWR/RTK Query 等策略；同參數短時間避免重複請求。
- 退避與重試：僅針對冪等 GET，採指數退避，設定全域 timeout。

## 分頁/排序/篩選
- 參數白名單與上限保護（`per_page` 上限）以避免超大回應。
- 統一解析 `meta.pagination`，共用表格/清單組件與骨架載入（skeleton）。

## 資源與打包
- 程式碼分割（路由/元件維度），關鍵路徑優先；非關鍵資產延遲載入。
- Tree-shaking 與按需載入 UI 套件；共用第三方依賴版本避免重複。
- 圖片/字型：使用現代格式（WebP/WOFF2），啟用 lazy-loading 與尺寸占位。

## 快取與儲存
- 使用瀏覽器快取頭（`Cache-Control`）與 ETag；對靜態資產採檔名雜湊。
- 客端儲存（IndexedDB/LocalStorage）僅保存非敏感與可失效資料，設置版本鍵以便清除。

## i18n 與文案
- 多語字典分割載入（依語系 chunk）；文案 key 去重，避免重複。

## 可觀測性
- 記錄 API 延遲、失敗率、重試次數；重要互動加 trace_id 串接後端。

## PR 檢查清單
- [ ] 列表 API 以分頁/排序/篩選控制資料量
- [ ] 有快取/去重策略，避免重複請求
- [ ] 具備程式碼分割與資產 lazy-load
- [ ] 圖片/字型使用現代格式並正確標註尺寸